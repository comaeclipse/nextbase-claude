generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Location {
  id              Int           @id @default(autoincrement())
  state           String
  city            String
  county          String?
  stateParty      String?       @map("state_party")
  population      Int?
  density         Int?
  costOfLiving    Int?          @map("cost_of_living")
  avgGasPrice     Float?        @map("avg_gas_price")
  salesTax        Float?        @map("sales_tax")
  incomeTax       Float?        @map("income_tax")
  crimeIndex      Int?          @map("crime_index")
  climateType     String?       @map("climate_type")
  sunnyDays       Int?          @map("sunny_days")
  avgHighSummer   Int?          @map("avg_high_summer")
  avgLowWinter    Int?          @map("avg_low_winter")
  avgRainfall     Int?          @map("avg_rainfall")
  avgSnowfall     Int?          @map("avg_snowfall")
  humiditySummer  Int?          @map("humidity_summer")
  vaFacilities    Boolean       @default(false) @map("va_facilities")
  nearestVA       String?       @map("nearest_va")
  distanceToVA    String?       @map("distance_to_va")
  techHub         Boolean       @default(false) @map("tech_hub")
  militaryHub     Boolean       @default(false) @map("military_hub")
  marijuanaStatus String?       @map("marijuana_status")
  lgbtqRank       Int?          @map("lgbtq_rank")
  lat             Float?
  lng             Float?
  description     String?
  extraData       Json?         @map("extra_data")
  createdAt       DateTime      @default(now()) @map("created_at")
  updatedAt       DateTime      @updatedAt @map("updated_at")
  locationTags    LocationTag[]

  @@unique([state, city])
  @@map("locations")
}

model Tag {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  category     String
  description  String?
  createdAt    DateTime      @default(now()) @map("created_at")
  locationTags LocationTag[]

  @@map("tags")
}

model LocationTag {
  locationId Int      @map("location_id")
  tagId      Int      @map("tag_id")
  location   Location @relation(fields: [locationId], references: [id], onDelete: Cascade)
  tag        Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@id([locationId, tagId])
  @@map("location_tags")
}
