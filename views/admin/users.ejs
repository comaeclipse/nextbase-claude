<div class="users-management">
    <div class="management-header">
        <div class="header-info">
            <h2>Admin Users</h2>
            <p>Manage administrative users and their access</p>
        </div>
        <div class="header-actions">
            <button id="addUserBtn" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                <span>Add Admin User</span>
            </button>
        </div>
    </div>

    <div class="table-container">
        <% if (users && users.length > 0) { %>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Created</th>
                        <th>Last Login</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% users.forEach(user => { %>
                        <tr>
                            <td>
                                <div class="user-info">
                                    <i class="fas fa-user-circle"></i>
                                    <strong><%= user.username %></strong>
                                </div>
                            </td>
                            <td><%= user.email || 'N/A' %></td>
                            <td>
                                <span class="role-badge role-<%= user.role %>">
                                    <%= user.role %>
                                </span>
                            </td>
                            <td><%= new Date(user.created_at).toLocaleDateString() %></td>
                            <td><%= user.last_login ? new Date(user.last_login).toLocaleDateString() : 'Never' %></td>
                            <td>
                                <div class="actions">
                                    <% if (user.id !== 1) { %>
                                        <button class="btn-small btn-delete" data-type="user" data-id="<%= user.id %>" data-name="<%= user.username %>" data-tooltip="Delete User">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    <% } else { %>
                                        <span class="text-muted" data-tooltip="Primary admin cannot be deleted">
                                            <i class="fas fa-shield-alt"></i>
                                        </span>
                                    <% } %>
                                </div>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <div class="empty-state">
                <i class="fas fa-users"></i>
                <h3>No Admin Users Found</h3>
                <p>Add administrators to manage the system.</p>
            </div>
        <% } %>
    </div>
</div>

<!-- Add User Modal -->
<div id="addUserModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Add New Admin User</h3>
            <button class="modal-close">&times;</button>
        </div>
        <form id="addUserForm" action="/admin/users" method="POST" class="validate-form">
            <div class="modal-body">
                <div class="form-group">
                    <label for="username">Username *</label>
                    <input type="text" id="username" name="username" required
                           placeholder="Enter username">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email"
                           placeholder="Enter email address">
                </div>

                <div class="form-group">
                    <label for="password">Password *</label>
                    <input type="password" id="password" name="password" required
                           placeholder="Enter password (min. 6 characters)" minlength="6">
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm Password *</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required
                           placeholder="Confirm password">
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">Cancel</button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    <span>Add User</span>
                </button>
            </div>
        </form>
    </div>
</div>

