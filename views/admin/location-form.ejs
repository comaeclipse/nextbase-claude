<div class="form-container">
    <div class="form-header">
        <h2><%= action === 'add' ? 'Add New Location' : 'Edit Location' %></h2>
        <p>Enter detailed information about the retirement location</p>
    </div>

    <form class="admin-form validate-form" action="/admin/locations<%= location ? '/' + location.id : '' %>" method="POST">
        <% if (location) { %>
            <input type="hidden" name="_method" value="PUT">
            <input type="hidden" name="id" value="<%= location.id %>">
        <% } %>

        <div class="form-grid">
            <!-- Basic Information Section -->
            <div class="form-section">
                <h3><i class="fas fa-info-circle"></i> Basic Information</h3>

                <div class="form-group">
                    <label for="name">Location Name *</label>
                    <input type="text" id="name" name="name" required
                           value="<%= location ? location.name : '' %>"
                           placeholder="e.g., Austin, Texas">
                </div>

                <div class="form-group">
                    <label for="city">City *</label>
                    <input type="text" id="city" name="city" required
                           value="<%= location ? location.city : '' %>"
                           placeholder="e.g., Austin">
                </div>

                <div class="form-group">
                    <label for="state">State *</label>
                    <input type="text" id="state" name="state" required
                           value="<%= location ? location.state : '' %>"
                           placeholder="e.g., Texas">
                </div>

                <div class="form-group">
                    <label for="region">Region *</label>
                    <select id="region" name="region" required>
                        <option value="">Select Region</option>
                        <option value="northeast" <%= location && location.region === 'northeast' ? 'selected' : '' %>>Northeast</option>
                        <option value="southeast" <%= location && location.region === 'southeast' ? 'selected' : '' %>>Southeast</option>
                        <option value="midwest" <%= location && location.region === 'midwest' ? 'selected' : '' %>>Midwest</option>
                        <option value="southwest" <%= location && location.region === 'southwest' ? 'selected' : '' %>>Southwest</option>
                        <option value="west" <%= location && location.region === 'west' ? 'selected' : '' %>>West Coast</option>
                        <option value="mountain" <%= location && location.region === 'mountain' ? 'selected' : '' %>>Mountain States</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3"
                              placeholder="Brief description of the location"><%= location ? location.description : '' %></textarea>
                </div>
            </div>

            <!-- Climate & Financial Section -->
            <div class="form-section">
                <h3><i class="fas fa-thermometer-half"></i> Climate & Financial</h3>

                <div class="form-group">
                    <label for="climate_type">Climate Type</label>
                    <select id="climate_type" name="climate_type">
                        <option value="">Select Climate</option>
                        <option value="warm" <%= location && location.climate_type === 'warm' ? 'selected' : '' %>>Warm Year-Round</option>
                        <option value="mild" <%= location && location.climate_type === 'mild' ? 'selected' : '' %>>Mild Seasons</option>
                        <option value="four-seasons" <%= location && location.climate_type === 'four-seasons' ? 'selected' : '' %>>Four Distinct Seasons</option>
                        <option value="cool" <%= location && location.climate_type === 'cool' ? 'selected' : '' %>>Cooler Temperatures</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="population_density">Population Density</label>
                    <select id="population_density" name="population_density">
                        <option value="">Select Density</option>
                        <option value="urban" <%= location && location.population_density === 'urban' ? 'selected' : '' %>>Urban/City</option>
                        <option value="suburban" <%= location && location.population_density === 'suburban' ? 'selected' : '' %>>Suburban</option>
                        <option value="rural" <%= location && location.population_density === 'rural' ? 'selected' : '' %>>Rural/Small Town</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="state_income_tax" name="state_income_tax"
                           <%= location && location.state_income_tax ? 'checked' : '' %>>
                    <label for="state_income_tax">Has State Income Tax</label>
                </div>

                <div class="form-group">
                    <label for="cost_of_living_index">Cost of Living Index</label>
                    <input type="number" id="cost_of_living_index" name="cost_of_living_index" step="0.1"
                           value="<%= location ? location.cost_of_living_index : '' %>"
                           placeholder="e.g., 103.2 (100 = national average)">
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="veteran_tax_benefits" name="veteran_tax_benefits"
                           <%= location && location.veteran_tax_benefits ? 'checked' : '' %>>
                    <label for="veteran_tax_benefits">Veteran Tax Benefits Available</label>
                </div>
            </div>

            <!-- Healthcare & Community Section -->
            <div class="form-section">
                <h3><i class="fas fa-heart"></i> Healthcare & Community</h3>

                <div class="form-group">
                    <label for="healthcare_quality_score">Healthcare Quality Score (0-100)</label>
                    <input type="number" id="healthcare_quality_score" name="healthcare_quality_score" min="0" max="100"
                           value="<%= location ? location.healthcare_quality_score : '' %>"
                           placeholder="e.g., 85">
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="va_facilities_nearby" name="va_facilities_nearby"
                           <%= location && location.va_facilities_nearby ? 'checked' : '' %>>
                    <label for="va_facilities_nearby">VA Facilities Nearby</label>
                </div>

                <div class="form-group">
                    <label for="veteran_population_pct">Veteran Population (%)</label>
                    <input type="number" id="veteran_population_pct" name="veteran_population_pct" step="0.1" min="0" max="100"
                           value="<%= location ? location.veteran_population_pct : '' %>"
                           placeholder="e.g., 12.5">
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="military_friendly_businesses" name="military_friendly_businesses"
                           <%= location && location.military_friendly_businesses ? 'checked' : '' %>>
                    <label for="military_friendly_businesses">Military-Friendly Businesses</label>
                </div>
            </div>

            <!-- Gun Laws & Additional Info Section -->
            <div class="form-section">
                <h3><i class="fas fa-shield-alt"></i> Legal & Additional Info</h3>

                <div class="form-group">
                    <label for="gun_laws_rating">Gun Laws Rating</label>
                    <select id="gun_laws_rating" name="gun_laws_rating">
                        <option value="">Select Rating</option>
                        <option value="constitutional-carry" <%= location && location.gun_laws_rating === 'constitutional-carry' ? 'selected' : '' %>>Constitutional Carry</option>
                        <option value="shall-issue" <%= location && location.gun_laws_rating === 'shall-issue' ? 'selected' : '' %>>Shall Issue CCW</option>
                        <option value="may-issue" <%= location && location.gun_laws_rating === 'may-issue' ? 'selected' : '' %>>May Issue CCW</option>
                        <option value="no-issue" <%= location && location.gun_laws_rating === 'no-issue' ? 'selected' : '' %>>No Issue</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="constitutional_carry" name="constitutional_carry"
                           <%= location && location.constitutional_carry ? 'checked' : '' %>>
                    <label for="constitutional_carry">Constitutional Carry</label>
                </div>

                <div class="form-group">
                    <label for="pros">Pros (one per line)</label>
                    <textarea id="pros" name="pros" rows="4"
                              placeholder="List the positive aspects of this location"><%= location ? location.pros : '' %></textarea>
                </div>

                <div class="form-group">
                    <label for="cons">Cons (one per line)</label>
                    <textarea id="cons" name="cons" rows="4"
                              placeholder="List the potential drawbacks of this location"><%= location ? location.cons : '' %></textarea>
                </div>

                <div class="form-group">
                    <label for="best_for">Best For</label>
                    <textarea id="best_for" name="best_for" rows="3"
                              placeholder="Describe what type of retiree this location is best suited for"><%= location ? location.best_for : '' %></textarea>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <a href="/admin/locations" class="btn btn-secondary">
                <i class="fas fa-times"></i>
                <span>Cancel</span>
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                <span><%= action === 'add' ? 'Add Location' : 'Update Location' %></span>
            </button>
        </div>
    </form>
</div>

